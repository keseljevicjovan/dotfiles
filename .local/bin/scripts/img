#!/bin/sh

FIFO="/tmp/preview_fifo__$(uuidgen)"
[ -p "$FIFO" ] || mkfifo "$FIFO"

trap 'rm -f "$FIFO"' HUP INT QUIT TERM EXIT
ueberzugpp layer --silent <"$FIFO" &
exec 3>"${FIFO}"

echo '{"path": "'"$1"'", "action": "add", "identifier": "img-fifo", "x": "'"$2"'", "y": "'"$3"'", "width": "'"$4"'", "height": "'"$5"'"}' >"$FIFO"
wait
